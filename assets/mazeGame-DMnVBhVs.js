import{d as Pe,i as Ae,r as O,e as Ee,m as Fe,c as N,B as Se,a as y,C as Be,t as D,u as $,F as ae,q as fe,G as re,o as U,s as Re,y as Oe,U as ze}from"./index-DEV8ttpb.js";import{h as me}from"./moment-C5S46NFB.js";var se={};(function ie(b,F,P,d){var K=!!(b.Worker&&b.Blob&&b.Promise&&b.OffscreenCanvas&&b.OffscreenCanvasRenderingContext2D&&b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype.transferControlToOffscreen&&b.URL&&b.URL.createObjectURL),J=typeof Path2D=="function"&&typeof DOMMatrix=="function",V=function(){if(!b.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function q(){}function Z(a){var e=F.exports.Promise,r=e!==void 0?e:b.Promise;return typeof r=="function"?new r(a):(a(q,q),null)}var z=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var t=new OffscreenCanvas(r.width,r.height),l=t.getContext("2d");return l.drawImage(r,0,0),e.set(r,t),t},clear:function(){e.clear()}}}(V,new Map),Q=function(){var a=Math.floor(16.666666666666668),e,r,t={},l=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(s){var i=Math.random();return t[i]=requestAnimationFrame(function n(u){l===u||l+a-1<u?(l=u,delete t[i],s()):t[i]=requestAnimationFrame(n)}),i},r=function(s){t[s]&&cancelAnimationFrame(t[s])}):(e=function(s){return setTimeout(s,a)},r=function(s){return clearTimeout(s)}),{frame:e,cancel:r}}(),ne=function(){var a,e,r={};function t(l){function s(i,n){l.postMessage({options:i||{},callback:n})}l.init=function(n){var u=n.transferControlToOffscreen();l.postMessage({canvas:u},[u])},l.fire=function(n,u,h){if(e)return s(n,null),e;var g=Math.random().toString(36).slice(2);return e=Z(function(v){function p(x){x.data.callback===g&&(delete r[g],l.removeEventListener("message",p),e=null,z.clear(),h(),v())}l.addEventListener("message",p),s(n,g),r[g]=p.bind(null,{data:{callback:g}})}),e},l.reset=function(){l.postMessage({reset:!0});for(var n in r)r[n](),delete r[n]}}return function(){if(a)return a;if(!P&&K){var l=["var CONFETTI, SIZE = {}, module = {};","("+ie.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([l])))}catch(s){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",s),null}t(a)}return a}}(),X={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function te(a,e){return e?e(a):a}function Y(a){return a!=null}function f(a,e,r){return te(a&&Y(a[e])?a[e]:X[e],r)}function S(a){return a<0?0:Math.floor(a)}function C(a,e){return Math.floor(Math.random()*(e-a))+a}function T(a){return parseInt(a,16)}function o(a){return a.map(w)}function w(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:T(e.substring(0,2)),g:T(e.substring(2,4)),b:T(e.substring(4,6))}}function L(a){var e=f(a,"origin",Object);return e.x=f(e,"x",Number),e.y=f(e,"y",Number),e}function j(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function W(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function oe(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function M(a,e,r,t,l,s,i,n,u){a.save(),a.translate(e,r),a.rotate(s),a.scale(t,l),a.arc(0,0,1,i,n,u),a.restore()}function m(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function k(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,t=e.x+e.random*e.tiltCos,l=e.y+e.random*e.tiltSin,s=e.wobbleX+e.random*e.tiltCos,i=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),J&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(ge(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(s-t)*.1,Math.abs(i-l)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var n=Math.PI/10*e.wobble,u=Math.abs(s-t)*.1,h=Math.abs(i-l)*.1,g=e.shape.bitmap.width*e.scalar,v=e.shape.bitmap.height*e.scalar,p=new DOMMatrix([Math.cos(n)*u,Math.sin(n)*u,-Math.sin(n)*h,Math.cos(n)*h,e.x,e.y]);p.multiplySelf(new DOMMatrix(e.shape.matrix));var x=a.createPattern(z.transform(e.shape.bitmap),"no-repeat");x.setTransform(p),a.globalAlpha=1-r,a.fillStyle=x,a.fillRect(e.x-g/2,e.y-v/2,g,v),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(s-t)*e.ovalScalar,Math.abs(i-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):M(a,e.x,e.y,Math.abs(s-t)*e.ovalScalar,Math.abs(i-l)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var c=Math.PI/2*3,I=4*e.scalar,A=8*e.scalar,E=e.x,R=e.y,G=5,B=Math.PI/G;G--;)E=e.x+Math.cos(c)*A,R=e.y+Math.sin(c)*A,a.lineTo(E,R),c+=B,E=e.x+Math.cos(c)*I,R=e.y+Math.sin(c)*I,a.lineTo(E,R),c+=B;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(l)),a.lineTo(Math.floor(s),Math.floor(i)),a.lineTo(Math.floor(t),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function ee(a,e,r,t,l){var s=e.slice(),i=a.getContext("2d"),n,u,h=Z(function(g){function v(){n=u=null,i.clearRect(0,0,t.width,t.height),z.clear(),l(),g()}function p(){P&&!(t.width===d.width&&t.height===d.height)&&(t.width=a.width=d.width,t.height=a.height=d.height),!t.width&&!t.height&&(r(a),t.width=a.width,t.height=a.height),i.clearRect(0,0,t.width,t.height),s=s.filter(function(x){return k(i,x)}),s.length?n=Q.frame(p):v()}n=Q.frame(p),u=v});return{addFettis:function(g){return s=s.concat(g),h},canvas:a,promise:h,reset:function(){n&&Q.cancel(n),u&&u()}}}function H(a,e){var r=!a,t=!!f(e||{},"resize"),l=!1,s=f(e,"disableForReducedMotion",Boolean),i=K&&!!f(e||{},"useWorker"),n=i?ne():null,u=r?j:W,h=a&&n?!!a.__confetti_initialized:!1,g=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,v;function p(c,I,A){for(var E=f(c,"particleCount",S),R=f(c,"angle",Number),G=f(c,"spread",Number),B=f(c,"startVelocity",Number),we=f(c,"decay",Number),Me=f(c,"gravity",Number),be=f(c,"drift",Number),ce=f(c,"colors",o),xe=f(c,"ticks",Number),de=f(c,"shapes"),Ce=f(c,"scalar"),Te=!!f(c,"flat"),he=L(c),ve=E,le=[],ke=a.width*he.x,Ie=a.height*he.y;ve--;)le.push(m({x:ke,y:Ie,angle:R,spread:G,startVelocity:B,color:ce[ve%ce.length],shape:de[C(0,de.length)],ticks:xe,decay:we,gravity:Me,drift:be,scalar:Ce,flat:Te}));return v?v.addFettis(le):(v=ee(a,le,u,I,A),v.promise)}function x(c){var I=s||f(c,"disableForReducedMotion",Boolean),A=f(c,"zIndex",Number);if(I&&g)return Z(function(B){B()});r&&v?a=v.canvas:r&&!a&&(a=oe(A),document.body.appendChild(a)),t&&!h&&u(a);var E={width:a.width,height:a.height};n&&!h&&n.init(a),h=!0,n&&(a.__confetti_initialized=!0);function R(){if(n){var B={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};u(B),n.postMessage({resize:{width:B.width,height:B.height}});return}E.width=E.height=null}function G(){v=null,t&&(l=!1,b.removeEventListener("resize",R)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,h=!1)}return t&&!l&&(l=!0,b.addEventListener("resize",R,!1)),n?n.fire(c,E,G):p(c,E,G)}return x.reset=function(){n&&n.reset(),v&&v.reset()},x}var _;function ue(){return _||(_=H(null,{useWorker:!0,resize:!0})),_}function ge(a,e,r,t,l,s,i){var n=new Path2D(a),u=new Path2D;u.addPath(n,new DOMMatrix(e));var h=new Path2D;return h.addPath(u,new DOMMatrix([Math.cos(i)*l,Math.sin(i)*l,-Math.sin(i)*s,Math.cos(i)*s,r,t])),h}function pe(a){if(!J)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var t=new Path2D(e),l=document.createElement("canvas"),s=l.getContext("2d");if(!r){for(var i=1e3,n=i,u=i,h=0,g=0,v,p,x=0;x<i;x+=2)for(var c=0;c<i;c+=2)s.isPointInPath(t,x,c,"nonzero")&&(n=Math.min(n,x),u=Math.min(u,c),h=Math.max(h,x),g=Math.max(g,c));v=h-n,p=g-u;var I=10,A=Math.min(I/v,I/p);r=[A,0,0,A,-Math.round(v/2+n)*A,-Math.round(p/2+u)*A]}return{type:"path",path:e,matrix:r}}function ye(a){var e,r=1,t="#000000",l='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,l="fontFamily"in a?a.fontFamily:l,t="color"in a?a.color:t);var s=10*r,i=""+s+"px "+l,n=new OffscreenCanvas(s,s),u=n.getContext("2d");u.font=i;var h=u.measureText(e),g=Math.ceil(h.actualBoundingBoxRight+h.actualBoundingBoxLeft),v=Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent),p=2,x=h.actualBoundingBoxLeft+p,c=h.actualBoundingBoxAscent+p;g+=p+p,v+=p+p,n=new OffscreenCanvas(g,v),u=n.getContext("2d"),u.font=i,u.fillStyle=t,u.fillText(e,x,c);var I=1/r;return{type:"bitmap",bitmap:n.transferToImageBitmap(),matrix:[I,0,0,I,-g*I/2,-v*I/2]}}F.exports=function(){return ue().apply(this,arguments)},F.exports.reset=function(){ue().reset()},F.exports.create=H,F.exports.shapeFromPath=pe,F.exports.shapeFromText=ye})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),se,!1);const Le=se.exports;se.exports.create;const Ne={class:"w-full h-full text-primary"},De={class:"text-black bg-gray-100 p-4 mb-4 rounded-md shadow-md relative"},Ue={class:"font-bold text-lg"},Ve={class:"mb-3"},je={class:"w-fit mx-auto pt-10"},We={class:"mb-5"},_e={class:"mx-auto w-fit mb-10"},Ge={class:"border-2 border-gray-500 p-2 shadow-lg bg-black rounded-md"},$e={class:"flex flex-nowrap"},qe={class:"flex flex-col items-center font-bold md:hidden"},Ze={class:"flex gap-14"},He={key:1,class:"p-[159px]"},Qe=Pe({__name:"mazeGame",setup(ie){const{t:b}=Ae.global,F=O(me().startOf("day")),P=O([]),d=O({x:0,y:0}),K=O({x:14,y:14}),J=O(0),V=O(null),q=O(new Audio("./gotPointSoundEffect.mp3")),Z=O(!0),z=O(null);Ee(()=>{window.addEventListener("keydown",X);const T=document.querySelector("meta[name=viewport]");T&&T.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=no"),q.value.load()});function Q(){P.value=ne(),d.value={x:0,y:0},V.value!==null&&clearInterval(V.value),V.value=setInterval(()=>{F.value=F.value.clone().add(1,"seconds")},1e3)}function ne(){let o=Array.from({length:15},()=>Array(15).fill(0));const w=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}];function L(M,m){return M>=0&&m>=0&&M<15&&m<15}function j(M){for(let m=M.length-1;m>0;m--){const k=Math.floor(Math.random()*(m+1));[M[m],M[k]]=[M[k],M[m]]}}function W(M,m){o[m][M]=1,j(w);for(const{x:k,y:ee}of w){const H=M+k*2,_=m+ee*2;L(H,_)&&o[_][H]===0&&(o[m+ee][M+k]=1,W(H,_))}}function oe(M){for(let m=0;m<M.length-1;m++)for(let k=0;k<M[m].length-1;k++)if(M[m][k]===0&&M[m+1][k]===0&&M[m][k+1]===0&&M[m+1][k+1]===0)return!1;return!0}do o=Array.from({length:15},()=>Array(15).fill(0)),W(14,14),o[0][0]=1;while(!oe(o));return o}function X(T){if(!Y()){switch(T.key){case"ArrowUp":d.value.y>0&&P.value[d.value.y-1][d.value.x]===1&&d.value.y--;break;case"ArrowDown":d.value.y<P.value.length-1&&P.value[d.value.y+1][d.value.x]===1&&d.value.y++;break;case"ArrowLeft":d.value.x>0&&P.value[d.value.y][d.value.x-1]===1&&d.value.x--;break;case"ArrowRight":d.value.x<P.value[0].length-1&&P.value[d.value.y][d.value.x+1]===1&&d.value.x++;break}te()}}function te(){Y()&&(J.value++,V.value!==null&&clearInterval(V.value),q.value.currentTime=0,q.value.play(),f())}function Y(){return d.value.x===K.value.x&&d.value.y===K.value.y}function f(){const o={origin:{y:.7},zIndex:9999};function w(L,j){Le({...o,...j,particleCount:Math.floor(200*L)})}w(.25,{spread:26,startVelocity:55}),w(.2,{spread:60}),w(.35,{spread:100,decay:.91,scalar:.8}),w(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),w(.1,{spread:120,startVelocity:45})}function S(T){X({key:T}),z.value=setInterval(()=>{X({key:T})},100)}function C(){z.value&&(clearInterval(z.value),z.value=null)}return Fe(()=>{C()}),(T,o)=>(U(),N("div",Ne,[Se(y("div",De,[y("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",onClick:o[0]||(o[0]=w=>Z.value=!1)},o[9]||(o[9]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y("h2",Ue,D($(b)("MazeGame.title")),1),y("p",Ve,D($(b)("MazeGame.instruction")),1),y("p",null,D($(b)("MazeGame.instructionDetail")),1)],512),[[Be,Z.value]]),y("div",je,[y("p",We,D($(b)("MazeGame.completionCount"))+" : "+D(J.value)+" , "+D($(b)("MazeGame.spendTime"))+": "+D(F.value.diff($(me)().startOf("day"),"seconds"))+"s ",1),y("button",{class:"btn mb-5 w-20 h-10",onClick:Q},D($(b)("MazeGame.startButton")),1),P.value.length>0?(U(),N(ae,{key:0},[y("div",_e,[y("div",Ge,[(U(!0),N(ae,null,fe(P.value,(w,L)=>(U(),N("div",$e,[(U(!0),N(ae,null,fe(w,(j,W)=>(U(),N("div",{style:Re({width:"20px",height:"20px",backgroundColor:d.value.x===W&&d.value.y===L?"red":j===0?"black":"white"})},[L===14&&W===14?(U(),N(ae,{key:0},[ze(" ⭐ ")],64)):Oe("",!0)],4))),256))]))),256))])]),y("div",qe,[y("button",{class:"btn mb-2 w-10 h-10",onMousedown:o[1]||(o[1]=w=>S("ArrowUp")),onMouseup:C,onMouseleave:C,onTouchstart:o[2]||(o[2]=re(w=>S("ArrowUp"),["prevent"])),onTouchend:C},o[10]||(o[10]=[y("i",{class:"fas fa-arrow-up"},null,-1)]),32),y("div",Ze,[y("button",{class:"btn w-10 h-10",onMousedown:o[3]||(o[3]=w=>S("ArrowLeft")),onMouseup:C,onMouseleave:C,onTouchstart:o[4]||(o[4]=re(w=>S("ArrowLeft"),["prevent"])),onTouchend:C},o[11]||(o[11]=[y("i",{class:"fas fa-arrow-left"},null,-1)]),32),y("button",{class:"btn w-10 h-10",onMousedown:o[5]||(o[5]=w=>S("ArrowRight")),onMouseup:C,onMouseleave:C,onTouchstart:o[6]||(o[6]=re(w=>S("ArrowRight"),["prevent"])),onTouchend:C},o[12]||(o[12]=[y("i",{class:"fas fa-arrow-right"},null,-1)]),32)]),y("button",{class:"btn mt-2 w-10 h-10",onMousedown:o[7]||(o[7]=w=>S("ArrowDown")),onMouseup:C,onMouseleave:C,onTouchstart:o[8]||(o[8]=re(w=>S("ArrowDown"),["prevent"])),onTouchend:C},o[13]||(o[13]=[y("i",{class:"fas fa-arrow-down"},null,-1)]),32)])],64)):(U(),N("div",He))])]))}});export{Qe as default};
